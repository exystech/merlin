.Dd $Mdocdate: October 6 2015 $
.Dt UPDATE-INITRD 8
.Os
.Sh NAME
.Nm update-initrd
.Nd generate initialization ramdisk
.Sh SYNOPSIS
.Nm update-initrd
.Op Fl \-sysroot Ns "=" Ns Ar sysroot
.Sh DESCRIPTION
.Nm update-initrd
generates the
.Pa /boot/sortix.initrd
.Xr initrd 7
containing a minimal system that searches for the root filesystem and chain
boots it as described in
.Xr initrd 7
and
.Xr init 8 .
It contains an init system, fsck, filesystem drivers and configuration.
.Pp
The produced minimal system contains copies of
.Xr fstab 5 ,
.Xr extfs 8 ,
.Xr fsck.ext2 8 ,
and
.Xr init 8 .
If any of those files are updated then the
.Xr initrd 7
should be regenerated by invoking
.Nm .
.Pp
The options are as follows:
.Bl -tag -width "12345678"
.It Fl \-sysroot Ns "=" Ns Ar sysroot
Rather than generating an
.Xr initrd 7
for the root filesystem, locate files in the
.Ar sysroot
directory instead and store the result as
.Ar sysroot Ns Pa /etc/sortix.initrd .
.El
.Sh FILES
.Bl -tag -width "/sbin/fsck.ext2" -compact
.It Pa /etc/fstab
.It Pa /sbin/extfs
.It Pa /sbin/fsck.ext2
.It Pa /sbin/init
.El
.Sh EXIT STATUS
.Nm
will exit 0 on success and non-zero otherwise.
.Sh SEE ALSO
.Xr fstab 5 ,
.Xr initrd 7 ,
.Xr disked 8 ,
.Xr extfs 8 ,
.Xr init 8 ,
.Xr initrdfs 8 ,
.Xr mkinitrd 8 ,
.Xr update-grub 8
